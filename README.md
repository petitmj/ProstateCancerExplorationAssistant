# Prostate Cancer Exploration Assistant

The **Prostate Cancer Exploration Assistant** is an AI-powered tool that helps explore resistance mechanisms in prostate cancer, focusing on AR-V7. This project integrates Snowflake's Snowpark, Cortex AI, and Mistral LLMs to efficiently retrieve, analyze, and provide insights on documents related to prostate cancer research.

## Core Features

- **Contextual Document Retrieval**: Fetches relevant documents using both Snowflake SQL queries and Cortex-powered AI search.
- **Insight Generation**: Uses Mistral LLMs to generate insights into prostate cancer mechanisms from retrieved documents.
- **Feedback System**: Collects user feedback on insights and logs it for review.
- **Database Interaction**: Seamlessly interacts with Snowflake's cloud-based database to store and retrieve documents, queries, insights, and feedback.
  
## Technologies Used

- **Snowflake Snowpark**: Provides a serverless platform for handling database interactions.
- **Mistral LLM**: Uses large language models to generate insights from textual data.
- **Streamlit**: A Python framework to build interactive applications, providing the user interface.
- **SQL**: For efficient document retrieval and feedback logging within Snowflake.

## Requirements

1. **Python 3.7+**
2. **Snowflake Python Connector**: For connecting to Snowflake via Snowpark.
3. **Streamlit**: For building the UI.
4. **Pandas**: For managing data in tabular form.

Install the required libraries with:

```bash
pip install snowflake-snowpark-python streamlit pandas
```

## Setup

1. **Snowflake Setup**:
   - Create a Snowflake account.
   - Set up a database, schema, and tables for documents, queries, insights, and feedback as described in the code.
   
2. **Streamlit Setup**:
   - Clone the repository.
   - Set up the required environment variables or use a `secrets.toml` file for Snowflake credentials.
   
   ```bash
   streamlit run app.py
   ```

3. **Cortex and Mistral Setup**:
   - Ensure that your Snowflake account is integrated with Cortex and Mistral LLM.
   - Set up access to the Cortex engine via Snowpark queries.

## How It Works

1. **Document Retrieval**: 
   - The user inputs a query (e.g., "AR-V7 resistance in prostate cancer").
   - The system uses Snowflake SQL queries to fetch relevant documents based on the content.
   - If no results are found, the system silently falls back to using Cortex's AI search to retrieve the most relevant content.

2. **Insight Generation**:
   - The context from the retrieved documents is sent to Mistral LLM, which generates insights into resistance mechanisms, specifically AR-V7.
   - Insights are displayed on the Streamlit app and logged into the Snowflake database for further reference.

3. **Feedback**:
   - Users can submit feedback on the insights generated, which is then logged in the database.
   - Feedback can be classified into three types: Positive, Negative, or Neutral.

4. **Feedback Logs**:
   - Users can view the feedback logs, which are linked to the generated insights in the database, providing insights into user opinions.

## Code Structure

- **app.py**: Main Streamlit app that contains the logic for document retrieval, insight generation, feedback submission, and feedback log viewing.
- **requirements.txt**: Lists all the dependencies needed to run the project.
- **secrets.toml**: Stores sensitive Snowflake credentials (if applicable).
- **README.md**: Documentation for setting up and using the project.

## Sample SQL Schema

1. **DOCUMENTS**: Stores the research documents retrieved from the database.
   - `DOCUMENTID (VARCHAR)`: Unique identifier for the document.
   - `QUERYID (NUMBER)`: Query ID for reference.
   - `TITLE (VARCHAR)`: Title of the document.
   - `CONTENT (VARCHAR)`: The full content of the document.
   
2. **INSIGHTS**: Stores the insights generated by Mistral.
   - `INSIGHTID (NUMBER)`: Unique identifier for each insight.
   - `QUERYID (NUMBER)`: Query ID for reference.
   - `INSIGHTTEXT (VARCHAR)`: Text of the insight.
   
3. **FEEDBACKLOGS**: Stores user feedback for generated insights.
   - `FEEDBACKID (NUMBER)`: Unique identifier for feedback.
   - `INSIGHTID (NUMBER)`: Insight ID for reference.
   - `FEEDBACKDETAILS (VARCHAR)`: The details of the feedback.
   - `FEEDBACKTYPE (VARCHAR)`: Type of feedback (Positive, Negative, Neutral).
   
4. **QUERIES**: Logs the user queries.
   - `QUERYID (NUMBER)`: Unique identifier for the query.
   - `QUERYTEXT (VARCHAR)`: Text of the query.
   - `USERID (NUMBER)`: The ID of the user submitting the query.

## How to Use

1. **Submit a Query**: Enter a query into the input field (e.g., "AR-V7 resistance in prostate cancer").
2. **Review Documents**: The system will fetch documents and display them.
3. **Generate Insights**: Click the 'Fetch and Analyze' button to generate insights from the documents using Mistral LLM.
4. **Provide Feedback**: After reviewing the insights, submit feedback (positive, negative, neutral).
5. **View Feedback Logs**: Access the feedback logs to view user inputs and the associated insights.

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

